<!DOCTYPE HTML>
<html>

<head>
  <script src="common/common.js"></script>
  <script src="config/config.js"></script>
  <meta content="no-siteapp" http-equiv="Cache-Control">
  <link media="handheld" rel="alternate">
  <!-- end 云适配 -->
  <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
  <title>拉勾网-最专业的互联网招聘平台</title>
  <meta content="23635710066417756375" property="qc:admins">
  <meta name="description" content="拉勾网是3W旗下的互联网领域垂直招聘网站">
  <meta name="keywords"
    content="拉勾,拉勾网,拉勾招聘,拉钩, 拉钩网 ,互联网招聘,拉勾互联网招聘, 移动互联网招聘, 垂直互联网招聘, 微信招聘, 微博招聘, 拉勾官网, 拉勾百科,跳槽, 高薪职位, 互联网圈子, IT招聘, 职场招聘, 猎头招聘,O2O招聘, LBS招聘, 社交招聘, 校园招聘, 校招,社会招聘,社招">
  <link href="style/images/favicon.ico" rel="Shortcut Icon">
  <link href="style/css/style.css" type="text/css" rel="stylesheet">
  <link href="style/css/external.min.css" type="text/css" rel="stylesheet">
  <link href="style/css/popup.css" type="text/css" rel="stylesheet">
  <link rel="stylesheet" href="node_modules/element-ui/lib/theme-chalk/index.css">
  <link rel="stylesheet" href="style/css/element.css">
  <script src="node_modules/vue/dist/vue.min.js"></script>
  <script src="node_modules/element-ui/lib/index.js"></script>
  <script src="node_modules/vue-resource/dist/vue-resource.min.js"></script>
  <script src="node_modules/jquery/dist/jquery.min.js"></script>
  <script src="style/js/jquery.lib.min.js" type="text/javascript"></script>
  <!--[if lte IE 8]>
    <script type="text/javascript" src="style/js/excanvas.js"></script>
<![endif]-->
  <style>
    #noticeInterviewForm .el-input--suffix .el-input__inner {
      width: 384px;
      height: 40px;
    }

    .el-input--small .el-input__inner {
      width: 146px;
    }
  </style>

<body>
  <div id="body" v-cloak>
    <div id="header">
      <div class="wrapper">
        <a class="logo" href="index.html">
          <img width="229" height="43" alt="拉勾招聘-专注互联网招聘" src="style/images/logo.png">
        </a>
        <ul id="navheader" class="reset">
          <li><a href="index.html">首页</a></li>
          <li><a href="myhome.html">公司</a></li>
          <li class="current"><a target="_blank" href="./filterResumes.html?status=0">简历管理</a></li>
          <li><a rel="nofollow" href="create.html">发布职位</a></li>
        </ul>
        <dl class="collapsible_menu">
          <dt>
            <span>{{easyname}}</span>
            <span class="red dn" id="noticeDot-0"></span>
            <i></i>
          </dt>
          <dd><a href="positions.html">我发布的职位</a></dd>
          <dd><a href="filterResumes.html">我收到的简历</a></dd>
          <dd class="btm"><a href="myhome.html">我的公司主页</a></dd>
          <dd><a href="accountBind.html">帐号设置</a></dd>
          <dd class="logout"><a rel="nofollow" href="login.html">退出</a></dd>
        </dl>
        <div class="dn" id="noticeTip">
          <span class="bot"></span>
          <span class="top"></span>
          <a target="_blank" href="delivery.html"><strong>0</strong>条新投递反馈</a>
          <a class="closeNT" href="javascript:;"></a>
        </div>
      </div>
    </div><!-- end #header -->
    <div id="container">
      <div class="sidebar">
        <a class="btn_create" href="create.html">发布新职位</a>
        <dl class="company_center_aside">
          <dt>我收到的简历</dt>
          <dd :class="{'current':status===0}">
            <a href="" @click.prevent="changeSwitch(0)">待处理简历</a>
          </dd>
          <dd :class="{'current':status===1}">
            <a href="" @click.prevent="changeSwitch(1)">待定简历</a>
          </dd>
          <dd :class="{'current':status===2}">
            <a href="" @click.prevent="changeSwitch(2)">已通知面试</a>
          </dd>
          <dd :class="{'current':status===3}">
            <a href="" @click.prevent="changeSwitch(3)">不合适简历</a>
          </dd>
          <!-- <dd>
            <a href="autoFilterResumes.html">自动过滤简历</a>
          </dd> -->
        </dl>
        <dl class="company_center_aside">
          <dt>我发布的职位</dt>
          <dd>
            <a href="positions.html?status=1">有效职位</a>
          </dd>
          <dd>
            <a href="positions.html?status=1">已下线职位</a>
          </dd>
        </dl>
      </div>
      <!-- end .sidebar -->
      <div class="content">
        <dl class="company_center_content">
          <dt>
            <h1 v-show="status===0">
              <em></em>
              待处理简历
              <span>（共{{total}}份）</span>
            </h1>
            <h1 v-show="status===1">
              <em></em>
              待定简历
              <span>（共{{total}}份）</span>
            </h1>
            <h1 v-show="status===2">
              <em></em>
              已通知面试
              <span>（共{{total}}份）</span>
            </h1>
            <h1 v-show="status===3">
              <em></em>
              不合适简历
              <span>（共{{total}}份）</span>
            </h1>
          </dt>
          <dd>
            <form id="filterForm">
              <div class="filter_actions ">
                <label class="checkbox">
                  <input type="checkbox">
                  <i></i>
                </label>
                <span>全选</span>
                <a id="resumeInterviewAll" href="javascript:;">待定</a>
                <a id="resumeRefuseAll" href="javascript:;">不合适</a>
                <div id="filter_btn">筛选简历 <em></em></div>
              </div><!-- end .filter_actions -->
              <div class="filter_options dn">
                <dl>
                  <dt>简历状态：</dt>
                  <dd>
                    <a rel="-1" class="current" href="javascript:;">不限</a>
                    <a rel="1" href="javascript:;">未阅读</a>
                    <a rel="2" href="javascript:;">已阅读</a>
                    <input type="hidden" value="-1" name="resumeStatus">
                  </dd>
                </dl>
                <dl>
                  <dt>简历形式：</dt>
                  <dd>
                    <a rel="-1" class="current" href="javascript:;">不限</a>
                    <a rel="0" href="javascript:;">附件简历</a>
                    <a rel="1" href="javascript:;">在线简历</a>
                    <input type="hidden" value="-1" name="resumeType">
                  </dd>
                </dl>
                <dl>
                  <dt>工作经验：</dt>
                  <dd>
                    <a rel="-1" class="current" href="javascript:;">不限</a>
                    <a rel="1" href="javascript:;">应届毕业生</a>
                    <a rel="2" href="javascript:;">一年以下</a>
                    <a rel="3" href="javascript:;">1-3年</a>
                    <a rel="4" href="javascript:;">3-5年</a>
                    <a rel="5" href="javascript:;">5-10年</a>
                    <a rel="6" href="javascript:;">10年以上</a>
                    <input type="hidden" value="-1" name="workExp">
                  </dd>
                </dl>
                <dl>
                  <dt>最低学历：</dt>
                  <dd>
                    <a rel="-1" class="current" href="javascript:;">不限</a>
                    <a rel="1" href="javascript:;">大专及以上</a>
                    <a rel="2" href="javascript:;">本科及以上</a>
                    <a rel="3" href="javascript:;">硕士及以上</a>
                    <a rel="4" href="javascript:;">博士及以上</a>
                    <input type="hidden" value="-1" name="eduExp">
                  </dd>
                </dl>
                <input type="hidden" value="0" name="filterStatus" id="filterStatus">
                <input type="hidden" value="" name="positionId" id="positionId">
              </div><!-- end .filter_options -->
              <ul class="reset resumeLists">
                <li v-for="(item,index) in resumes" :key="index" class="onlineResume">
                  <label class="checkbox">
                    <input type="checkbox">
                    <i></i>
                  </label>
                  <div class="resumeShow">
                    <a title="预览在线简历" target="_blank" @click="setChecked(item.jianId)" class="resumeImg"
                      :href="'preview.html?jianId='+item.jianId">
                      <img src="style/images/default_headpic.png">
                    </a>
                    <div class="resumeIntro">
                      <h3 class="unread">
                        <a target="_blank" @click="setChecked(item.id)" :title="'预览'+item.name+'的简历'"
                          :href="'preview.html?jianId='+item.jianId">
                          {{item.name}}的简历
                        </a>
                        <em></em>
                      </h3>
                      <span class="fr">投递时间：{{item.updatetime}}</span>
                      <div>
                        {{item.name}} / {{getSex(item.sex)}} / {{getEdu(item.education)}} /
                        {{getExperience(item.experience)}}
                      </div>
                      <div class="jdpublisher">
                        <span>
                          应聘职位：<a :title="item.jobName" target="_blank"
                            :href="'./jobdetail.html?jobId='+item.jobId">{{item.jobName}}</a>
                        </span>
                      </div>
                      <div class="jdpublisher">
                        <span>
                          电话：<a :title="item.jobName" target="_blank" href="javascript:void(0)">{{item.tel}}</a>
                        </span>
                        <span>
                          邮箱：<a target="_blank" href="javascript:void(0)">{{item.email}}</a>
                        </span>
                      </div>
                    </div>
                    <div class="links">
                      <a class="resume_notice" @click="changeComm(item.id,2,item.email)"
                        v-show="item.status!==3&&item.status!==2" href="javascript:void(0)">通知面试</a>
                      <a class="resume_notice" v-show="item.status===2" href="javascript:void(0)">已通知面试</a>
                      <a class="resume_refuse" v-show="item.status!==3&&item.status!==2" @click="changeEnable(item.id,3)"
                        href="javascript:void(0)">不合适</a>
                      <a class="resume_caninterview" v-show="item.status!==1&&item.status!==2" @click="setWait(item.id,1)"
                        href="javascript:void(0)">待定</a>
                      </a>
                    </div>
                  </div>
                </li>
              </ul><!-- end .resumeLists -->
            </form>
          </dd>
        </dl>
      </div>
      <!-- end .content -->
      <el-dialog title="简历不合适" width="552px" :visible.sync="showEnableDialog">
        <!--确认不合适弹窗-->
        <div style="height:400px;" class="popup" id="confirmRefuse">
          <form id="refuseMailForm">
            <table width="100%">
              <tbody>
                <tr>
                  <td>
                    <div class="refuse_icon">
                      <h3>确认这份简历不合适吗？</h3>
                      <span>确认后，系统将自动发送以下内容至用户邮箱</span>
                    </div>
                  </td>
                </tr>
                <tr>
                  <td>
                    <textarea name="content" v-model="contents"></textarea>
                  </td>
                </tr>
                <tr>
                  <td>
                    <input type="button" value="确认不合适" @click="setDeliveryStatus(deliveryId,deliveryStatus,contents)"
                      class="btn">
                    <a class="emial_cancel" @click="showEnableDialog=false" href="javascript:;">取消</a>
                  </td>
                </tr>
              </tbody>
            </table>
          </form>
        </div>
      </el-dialog>
      <el-dialog title="通知面试" :visible.sync="showCommDialog">
        <div style="overflow:auto;" class="popup" id="noticeInterview">
          <form id="noticeInterviewForm">
            <table width="100%" class="f16">
              <tbody>
                <tr>
                  <td width="20%" align="right" class="c9">收件人 </td>
                  <td width="80%">
                    <span class="c9" id="receiveEmail">{{communication.receiverEmail}}</span>
                  </td>
                </tr>
                <tr>
                  <td align="right"><span class="redstar">*</span>主题</td>
                  <td>
                    <input type="text" v-model="communication.title" placeholder="公司：职位名称面试通知" name="subject">
                  </td>
                </tr>
                <tr>
                  <td align="right"><span class="redstar">*</span>面试时间</td>
                  <td>
                    <el-date-picker value-format="yyyy-MM-dd" v-model="communication.date" align="right" type="datetime"
                      placeholder="选择日期">
                    </el-date-picker>
                  </td>
                </tr>
                <tr>
                  <td align="right"><span class="redstar">*</span>面试地点</td>
                  <td>
                    <input type="text" v-model="communication.addr" name="interAdd">
                  </td>
                </tr>
                <tr>
                  <td align="right"><span class="redstar">*</span>联系人</td>
                  <td>
                    <input type="text" v-model="communication.contacts" name="linkMan">
                  </td>
                </tr>
                <tr>
                  <td align="right"><span class="redstar">*</span>联系电话</td>
                  <td>
                    <input type="text" v-model="communication.tel" name="linkPhone">
                  </td>
                </tr>
                <tr>
                  <td valign="top" align="right">补充内容</td>
                  <td>
                    <textarea name="content" v-model="communication.content"></textarea>
                  </td>
                </tr>
                <tr>
                  <td></td>
                  <td>
                    <input type="button" @click="sendEmail" value="发送" class="btn">
                    <a @click="cancleSendEmail" class="emailPreview" href="javascript:;">取消</a>
                  </td>
                </tr>
              </tbody>
            </table>
          </form>
        </div>
      </el-dialog>
      <el-pagination v-show="total/4>1" class="Pagination myself" :current-page="currentPage" background
        layout="prev, pager, next" page-size="10" :total="total" prev-text="上一页" next-text="下一页"
        @current-change="changePage">
      </el-pagination>
    </div>
    <!-- end #container -->
  </div>
  <!-- end #body -->
  <div id="footer">
    <div class="wrapper">
      <a rel="nofollow" target="_blank" href="about.html">联系我们</a>
      <a target="_blank" href="http://www.lagou.com/af/zhaopin.html">互联网公司导航</a>
      <a rel="nofollow" target="_blank" href="http://e.weibo.com/lagou720">拉勾微博</a>
      <a rel="nofollow" href="javascript:void(0)" class="footer_qr">拉勾微信<i></i></a>
      <div class="copyright">&copy;2013-2014 Lagou <a
          href="http://www.miitbeian.gov.cn/state/outPortal/loginPortal.action" target="_blank">京ICP备14023790号-2</a>
      </div>
    </div>
  </div>
  <script>
    var app = new Vue({
      el: '#body',
      data: {
        showEnableDialog: false,
        showCommDialog: false,
        contents: '非常荣幸收到您的简历，在我们仔细阅读您的简历之后，却不得不很遗憾的通知您：您的简历与该职位的定位有些不匹配，因此无法进入面试。但您的信息已录入我司人才储备库，当有合适您的职位开放时我们将第一时间联系您，希望在未来我们有机会成为一起拼搏的同事；再次感谢您对我们的信任，祝您早日找到满意的工作。',
        waitContent: '',
        easyname: '',
        deliveryId: '',
        deliveryStatus: '',
        status: 0,
        currentPage: 1,
        total: 0,
        resumes: [],
        receiverEmail: '',
        communication: {
          receiverEmail: '',
          title: '',
          date: '',
          addr: '',
          contacts: '',
          tel: '',
          content: ''
        }
      },
      methods: {
        cancleSendEmail(){
          this.showCommDialog = false
          this.communication.receiverEmail= ''
          this.communication.title= ''
          this.communication.date= ''
          this.communication.addr= ''
          this.communication.contacts= ''
          this.communication.tel= ''
          this.communication.content= ''
        },
        setChecked(id) {
          this.$http.post(window.lagou + '/delivery/index/checked', { id }, { credentials: true, emulateJSON: true }).then((res) => {
          }).catch((err) => { })
        },
        sendEmail() {
          var { receiverEmail, title, date, addr, contacts, tel, content } = this.communication
          console.log(date)
          this.$http.post(window.lagou + '/email/index/sendMail', { receiverEmail, title, date, addr, contacts, tel, content }, { credential: true, emulateJSON: true }).then((res) => {
            console.log(typeof res.body)
            if (res.body === '1') {
              this.$message({
                type: 'success',
                message: '邮件发送成功',
                duration: 1500,
                onClose: () => {
                  this.showCommDialog = false
                  this.setDeliveryStatus(this.deliveryId, this.deliveryStatus, '')
                  this.getData()
                }
              })
            }
          }).then((err) => { })
        },
        changeComm(id, status, email) {
          this.deliveryId = id
          this.deliveryStatus = status
          this.showCommDialog = true
          this.communication.receiverEmail = email
        },
        setDeliveryStatus(id, status, contents) {
          this.$http.post(window.lagou + '/delivery/index/addInfo', { id, status, contents }, { credentials: true, emulateJSON: true }).then((res) => {
            if (res.body === 1) {
              this.$message({
                type: 'success',
                message: '操作成功',
                duration: 1500,
                onClose: () => {
                  this.showEnableDialog = false
                  this.getData()
                }
              })
            } else {
            }
          }).catch((err) => { })
        },
        changeSwitch(val) {
          this.status = val
          this.getData()
        },
        changeEnable(deliveryId, deliveryStatus) {
          this.showEnableDialog = true
          this.deliveryId = deliveryId
          this.deliveryStatus = deliveryStatus
        },
        changePage(currentPage) {
          this.currentPage = currentPage
          this.getData()
        },
        setWait(id, status) {
          this.$confirm('是否标记为待定状态？', '提示', {
            confirmButtonText: '是',
            canccleButtonText: '否'
          }).then(() => {
            this.setDeliveryStatus(id, status, '')
          }).catch(() => { })
        },
        setImproper(id, status) {
          this.$confirm('是否将该简历标记为不合适？', '提示', {
            confirmButtonText: '是',
            cancleButtonText: '否',
          }).then(() => {
            this.changeStatus(id, status)
          }).catch(() => { })
        },
        getData() {
          this.$http.post(window.lagou + '/delivery/index/getDelivery', { status: this.status, currentPage: this.currentPage }, { credentials: true, emulateJSON: true }).then((res) => {
            this.total = res.body.total
            this.resumes = res.body.data
          }).catch((err) => { })
        },
        checkCookie() {
          $.ajax({
            url: window.lagou + '/login/index/checkCookie',
            xhrFields: {
              withCredentials: "true"
            },
            success: (res) => {
              if (res.id !== '') {
                this.easyname = res.easyname ? res.easyname : '游客'
              } else {
                window.location.href = './login.html'
              }
            },
            error: (res) => {
              window.location.href = "./login.html"
            }
          })
        },

      },
      created() {
        this.status = getParams() ? getParams().status : 0
        this.status = parseInt(this.status)
        // this.currentPage = getParams().currentPage ? getParams().currentPage : 1
        this.checkCookie()
        this.getData()
      }
    })
  </script>
</body>

</html>