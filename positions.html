<!DOCTYPE HTML>
<html>

<head>
  <script src="config/config.js"></script>
  <script src="common/common.js"></script>
  <script async="" src="style/js/analytics.js"></script>
  <script src="style/js/allmobilize.min.js" charset="utf-8" id="allmobilize"></script>
  <script src="node_modules/vue/dist/vue.min.js"></script>
  <meta content="no-siteapp" http-equiv="Cache-Control">
  <link media="handheld" rel="alternate">
  <!-- end 云适配 -->
  <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
  <title>我发布的职位-招聘服务-拉勾网-最专业的互联网招聘平台</title>
  <meta name="description" content="拉勾网是3W旗下的互联网领域垂直招聘网站,互联网职业机会尽在拉勾网">
  <meta name="keywords"
    content="拉勾,拉勾网,拉勾招聘,拉钩, 拉钩网 ,互联网招聘,拉勾互联网招聘, 移动互联网招聘, 垂直互联网招聘, 微信招聘, 微博招聘, 拉勾官网, 拉勾百科,跳槽, 高薪职位, 互联网圈子, IT招聘, 职场招聘, 猎头招聘,O2O招聘, LBS招聘, 社交招聘, 校园招聘, 校招,社会招聘,社招">
  <meta content="QIQ6KC1oZ6" name="baidu-site-verification">
  <link rel="stylesheet" href="node_modules/element-ui/lib/theme-chalk/index.css">
  <link href="style/images/favicon.ico" rel="Shortcut Icon">
  <link href="style/css/style.css" type="text/css" rel="stylesheet">
  <link href="style/css/external.min.css" type="text/css" rel="stylesheet">
  <link href="style/css/popup.css" type="text/css" rel="stylesheet">
  <script src="node_modules/element-ui/lib/index.js"></script>
  <script src="node_modules/vue-resource/dist/vue-resource.min.js"></script>
  <script src="node_modules/jquery/dist/jquery.min.js"></script>
  <!-- <script type="text/javascript" src="style/js/jquery.1.10.1.min.js"></script> -->
  <script src="style/js/jquery.lib.min.js" type="text/javascript"></script>
  <!-- <script type="text/javascript" src="style/js/ajaxfileupload.js"></script> -->
  <!-- <script src="style/js/additional-methods.js" type="text/javascript"></script> -->
  <!--[if lte IE 8]>
    <script type="text/javascript" src="style/js/excanvas.js"></script>
<![endif]-->
</head>

<body>
  <div id="body" v-cloak>
    <div id="header">
      <div class="wrapper">
        <a class="logo" href="http://www.lagou.com/">
          <img width="229" height="43" alt="拉勾招聘-专注互联网招聘" src="style/images/logo.png">
        </a>
        <ul id="navheader" class="reset">
          <li><a href="index.html">首页</a></li>
          <li><a href="myhome.html">公司</a></li>
          <li class="current"><a target="_blank" href="positions.html">简历管理</a></li>
          <li><a rel="nofollow" href="create.html">发布职位</a></li>
        </ul>
        <dl class="collapsible_menu">
          <dt>
            <span>{{easyname}}</span>
            <i></i>
          </dt>
          <dd><a href="positions.html">我发布的职位</a></dd>
          <dd><a href="filterResumes.html">我收到的简历</a></dd>
          <dd class="btm"><a href="myhome.html">我的公司主页</a></dd>
          <dd><a href="accountBind.html">帐号设置</a></dd>
          <dd class="logout"><a rel="nofollow" href="login.html">退出</a></dd>
        </dl>
        <div id="noticeTip" class="dn">
          <span class="bot"></span>
          <span class="top"></span>
          <a target="_blank" href="delivery.html"><strong>1</strong>条新投递反馈</a>
          <a class="closeNT" href="javascript:;"></a>
        </div>
      </div>
    </div><!-- end #header -->
    <div id="container">
      <div class="sidebar">
        <a class="btn_create" href="create.html">发布新职位</a>
        <dl class="company_center_aside">
          <dt>我收到的简历</dt>
          <dd>
            <a :href="'filterResumes.html?status='+0">待处理简历</a>
          </dd>
          <dd>
            <a :href="'filterResumes.html?status='+1">待定简历</a>
          </dd>
          <dd>
            <a :href="'filterResumes.html?status='+2">已通知面试简历</a>
          </dd>
          <dd>
            <a :href="'filterResumes.html?status='+3">不合适简历</a>
          </dd>
          <!-- <dd class="btm">
            <a href="filterResumes.html?status=">自动过滤简历</a>
          </dd> -->
        </dl>
        <dl class="company_center_aside">
          <dt>我发布的职位</dt>
          <dd :class="{'current':searchData.status===0}">
            <a href="" @click.prevent="changeSwitch(0)">有效职位</a>
          </dd>
          <dd :class="{'current':searchData.status===1}">
            <a href="" @click.prevent="changeSwitch(1)">已下线职位</a>
          </dd>
        </dl>
      </div><!-- end .sidebar -->
      <div class="content">
        <dl class="company_center_content">
          <dt>
            <h1 v-show="searchData.status==='0'">
              <em></em>
              有效职位 
              <span>（共<i style="color:#fff;font-style:normal" id="positionNumber">{{jobs.length}}</i>个）</span>
            </h1>
            <h1 v-show="searchData.status==='1'">
              <em></em>
              已下线职位 
              <span>（共<i style="color:#fff;font-style:normal" id="positionNumber">{{jobs.length}}</i>个）</span>
            </h1>
          </dt>
          <dd>
            <form id="searchForm">
              <ul class="reset my_jobs">
                <li v-for="(item,index) in jobs" :key="index">
                  <h3>
                    <a target="_self" :href="'./jobdetail.html?jobId='+item.jobId">{{item.jobName}}</a>
                    <span>[{{item.city}}]</span>
                  </h3>
                  <span class="receivedResumeNo"><a href="unHandleResumes.html?positionId=149594">应聘简历（0）</a></span>
                  <div>{{getNature(item.nature)}} / {{item.min_salary}}k-{{item.max_salary}}k /
                    {{getExperience(item.experience)}} / {{getEdu(item.education)}}</div>
                  <div class="c9">发布时间： {{item.updatetime}}</div>
                  <div class="links">
                    <!-- <a class="job_refresh" href="javascript:void(0)">刷新<span>每个职位7天内只能刷新一次</span></a> -->
                    <a target="_blank" class="job_edit" :href="'create.html?jobId='+item.jobId">编辑</a>
                    <a class="job_offline" v-show="item.status===0" href="javascript:void(0)">下线</a>
                    <a class="job_offline" v-show="item.status===1" href="javascript:void(0)">上线</a>
                    <a class="job_del" @click="setOffById(item.jobId,index)" href="javascript:void(0)">删除</a>
                  </div>
                </li>
              </ul>
            </form>
            <el-pagination v-show="total>10" class="Pagination myself" :current-page="currentPage" background
              layout="prev, pager, next" page-size="10" :total="total" prev-text="上一页" next-text="下一页"
              @current-change="changePage">
            </el-pagination>
          </dd>
        </dl>
      </div>
      <!-- end .content -->
      <script src="style/js/job_list.min.js" type="text/javascript"></script>
      <a rel="nofollow" title="回到顶部" id="backtop"></a>
    </div>
    <!-- end #container -->
  </div>
  <!-- end #body -->
  <div id="footer">
    <div class="wrapper">
      <a rel="nofollow" target="_blank" href="about.html">联系我们</a>
      <a target="_blank" href="http://www.lagou.com/af/zhaopin.html">互联网公司导航</a>
      <a rel="nofollow" target="_blank" href="http://e.weibo.com/lagou720">拉勾微博</a>
      <a rel="nofollow" href="javascript:void(0)" class="footer_qr">拉勾微信<i></i></a>
      <div class="copyright">&copy;2013-2014 Lagou <a
          href="http://www.miitbeian.gov.cn/state/outPortal/loginPortal.action" target="_blank">京ICP备14023790号-2</a>
      </div>
    </div>
  </div>
  <script>
    var app = new Vue({
      el: '#body',
      data: {
        jobs: [],
        easyname:'',
        currentPage: 1,
        total: 0,
        searchData: {
          status:0
        }
      },
      methods: {
        changeSwitch(val){
          this.searchData.status=val
          this.getJobs()
        },
        checkCookie() {
          $.ajax({
            url: window.lagou + '/login/index/checkCookie',
            xhrFields: {
              withCredentials: "true"
            },
            success: (res) => {
              if (res.id!=='') {
                this.easyname = res.easyname ? res.easyname : '游客'
              } else {
                window.location.href = './login.html'
              }
            },
            error: (res) => {
              window.location.href = "./login.html"
            }
          })
        },
        getJobs() {
          $.ajax({
            url: window.lagou + '/job/index/getJob',
            xhrFields: {
              withCredentials: true
            },
            data: { currentPage: this.currentPage,fields:clearParams(this.searchData)},
            dataType: 'json',
            method: 'post',
            success: (res) => {
              this.jobs = res.data
              this.total = res.total
            },
            err: (err) => {

            }
          })
        },
        changePage(currentPage) {
          this.searchData.currentPage = currentPage
          window.location.href = window.local + '/positions.html?' + jsonToUrl(this.searchData)
        },
        setOffById(id,index){
          this.$http.post(window.lagou+'/job/index/changeStatus',{jobId:id,status:2},{emulateJSON:true,credentials:true}).then((res)=>{
            if(res.body==='1'){
              this.$message({
                type:'success',
                message:'删除成功',
                duration:500,
                onClose:()=>{
                  // 删除数据
                  this.jobs.splice(index,1)
                }
              })
            }else{
              this.$message({
                type:'error',
                message:'删除失败，请重新操作'
              })
            }
          }).catch((err)=>{})
        }
      },
      mounted() {
        // this.searchData = getParams()?getParams():this.searchData
        this.checkCookie()
        this.getJobs()
      }
    })
  </script>
</body>

</html>