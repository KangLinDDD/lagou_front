<!DOCTYPE HTML>
<html>

<head>
  <script src="common/common.js"></script>
  <script src="config/config.js"></script>
  <meta content="no-siteapp" http-equiv="Cache-Control">
  <link media="handheld" rel="alternate">
  <!-- end 云适配 -->
  <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
  <title>我收藏的职位-招聘服务-拉勾网-最专业的互联网招聘平台</title>
  <meta content="23635710066417756375" property="qc:admins">
  <meta name="description" content="拉勾网是3W旗下的互联网领域垂直招聘网站,互联网职业机会尽在拉勾网">
  <meta name="keywords"
    content="拉勾,拉勾网,拉勾招聘,拉钩, 拉钩网 ,互联网招聘,拉勾互联网招聘, 移动互联网招聘, 垂直互联网招聘, 微信招聘, 微博招聘, 拉勾官网, 拉勾百科,跳槽, 高薪职位, 互联网圈子, IT招聘, 职场招聘, 猎头招聘,O2O招聘, LBS招聘, 社交招聘, 校园招聘, 校招,社会招聘,社招">
  <meta content="QIQ6KC1oZ6" name="baidu-site-verification">
  <link href="style/images/favicon.ico" rel="Shortcut Icon">
  <link href="style/css/external.min.css" type="text/css" rel="stylesheet">
  <link href="style/css/popup.css" type="text/css" rel="stylesheet">
  <link rel="stylesheet" href="node_modules/element-ui/lib/theme-chalk/index.css">
  <script src="node_modules/vue/dist/vue.min.js"></script>
  <script src="node_modules/element-ui/lib/index.js"></script>
  <script src="node_modules/vue-resource/dist/vue-resource.min.js"></script>
  <script src="node_modules/jquery/dist/jquery.min.js"></script>
  <script src="style/js/jquery.lib.min.js" type="text/javascript"></script>
  <link href="style/css/style.css" type="text/css" rel="stylesheet">
  <link rel="stylesheet" href="style/css/element.css">
  <!--[if lte IE 8]>
    <script type="text/javascript" src="style/js/excanvas.js"></script>
<![endif]-->
</head>

<body>
  <div id="body" v-cloak>
    <div id="header">
      <div class="wrapper">
        <a class="logo" href="index.html">
          <img width="229" height="43" alt="拉勾招聘-专注互联网招聘" src="style/images/logo.png">
        </a>
        <ul id="navheader" class="reset">
          <li><a href="index.html">首页</a></li>
          <li><a href="companylist.html">公司</a></li>
          <li><a rel="nofollow" href="jianli.html">我的简历</a></li>
        </ul>
        <ul class="loginTop" v-show="!logined">
          <li><a href="login.html" rel="nofollow">登录</a></li>
          <li>|</li>
          <li><a href="register.html" rel="nofollow">注册</a></li>
        </ul>
        <dl class="collapsible_menu" v-show="userInfo.type===0">
          <dt>
            <span>{{userInfo.name}}</span>
          </dt>
          <dd><a rel="nofollow" href="jianli.html">我的简历</a></dd>
          <dd><a href="collections.html">我收藏的职位</a></dd>
          <dd class="btm"><a href="delivery.html">我的投递</a></dd>
          <dd><a href="accountBind.html">帐号设置</a></dd>
          <dd class="logout"><a rel="nofollow" href="login.html">退出</a></dd>
        </dl>
        <div class="dn" id="noticeTip">
          <span class="bot"></span>
          <span class="top"></span>
          <a target="_blank" href="delivery.html"><strong>0</strong>条新投递反馈</a>
          <a class="closeNT" href="javascript:;"></a>
        </div>
      </div>
    </div>
    <el-dialog class="deliveryTip" title="提示" center :visible.sync="dialogDelivery" width="30%">
      <span class="deliveryTip">是否投递？</span>
      <span slot="footer" class="dialog-footer">
        <el-button @click="dialogDelivery = false">取 消</el-button>
        <el-button type="primary" class="ele-button" @click="delivery">确 定</el-button>
      </span>
    </el-dialog>
    <!-- end #header -->
    <div id="container">
      <div class="clearfix">
        <div class="content_l">
          <dl class="c_collections">
            <dt>
              <h1><em></em>我收藏的职位</h1>
            </dt>
            <dd>
              <form id="collectionsForm">
                <ul class="reset my_collections">
                  <li v-for="(item,index) in jobs" :key="index">
                    <a :title="item.easyname" target="_blank" :href="'jobdetail.html?jobId='+item.jobId">
                      <img :alt="item.easyname" :src="item.logo">
                    </a>
                    <div class="co_item">
                      <h2 :title="item.jobName">
                        <a target="_blank" href="h/jobs/133340.html">
                          <em>{{item.jobName}}</em>
                          <span>（{{item.min_salary}}k-{{item.max_salary}}k）</span>
                        </a>
                      </h2>
                      <span class="co_time">发布时间：{{item.updatetime}}</span>
                      <div class="co_cate">{{item.easyname}} / {{item.city}} / {{getExperience(item.experience)}} /
                        {{getEdu(item.education)}}</div>
                      <span class="co_youhuo c7">{{item.advantage}}</span>
                      <a class="collection_link" @click="setJobId(item.jobId)" href="#">投个简历</a>
                      <i></i>
                      <a class="collectionCancel collection_link collected" href="javascript:;"
                        @click="cancleCollect(item.id)">
                        取消收藏
                        <span>已取消收藏</span>
                      </a>
                    </div>
                  </li>
                </ul>
              </form>
            </dd>
          </dl>
          <el-pagination v-show="total/10>1" class="Pagination myself" :current-page="currentPage" background
            layout="prev, pager, next" page-size="10" :total="total" prev-text="上一页" next-text="下一页"
            @current-change="changePage">
          </el-pagination>
        </div>
        <div class="content_r">
          <div class="mycenterR" id="myInfo">
            <h2>我的信息</h2>
            <a href="collections.html">我收藏的职位</a>
            <!-- <br> -->
            <!-- <a target="_blank" href="subscribe.html">我订阅的职位</a> -->
          </div>
          <!--end #myInfo-->
          <div class="greybg qrcode mt20">
            <img width="242" height="242" alt="拉勾微信公众号二维码" src="style/images/qr_delivery.png">
            <span class="c7">扫描拉勾二维码，微信轻松搜工作</span>
          </div>
        </div>
      </div>
    </div>
    <!-- end #container -->
  </div>
  <!-- end #body -->
  <div id="footer">
    <div class="wrapper">
      <a rel="nofollow" target="_blank" href="h/about.html">联系我们</a>
      <a target="_blank" href="h/af/zhaopin.html">互联网公司导航</a>
      <a rel="nofollow" target="_blank" href="http://e.weibo.com/lagou720">拉勾微博</a>
      <a rel="nofollow" href="javascript:void(0)" class="footer_qr">拉勾微信<i></i></a>
      <div class="copyright">&copy;2013-2014 Lagou <a
          href="http://www.miitbeian.gov.cn/state/outPortal/loginPortal.action" target="_blank">京ICP备14023790号-2</a>
      </div>
    </div>
  </div>
  <script>
    var app = new Vue({
      el: '#body',
      data: {
        dialogDelivery: false,
        currentPage: 1,
        total: 0,
        jobs: [],
        logined: false,
        userInfo: {}
      },
      methods: {
        checkCookie() {
          $.ajax({
            url: window.lagou + '/login/index/checkCookie',
            xhrFields: {
              withCredentials: "true"
            },
            success: (res) => {
              if (res.id === '' || res === null) {
                window.location.href = "./login.html"
                return
              }
              // 普通用户
              if (res.type === 0) {
                this.userInfo = res
                this.userInfo.name = res.name ? res.name : '游客'
                this.dialogVisible = res.name === '' ? true : false
                this.logined = true
              } else if (res.type === 1) {
                this.$confirm('当前登录角色权限不足，是否重新登录', '提示', {
                  confirmButtonText: '确定',
                  cancleButtonText: '取消'
                }).then(() => {
                  window.location.href = "./login.html"
                }).catch(() => {
                  window.location.href = "./index.html"
                })
              } else {
                // 登录失败
                window.location.href = "./login.html"
              }
            },
            error: (res) => {
              // window.location.href = "./login.html"
            }
          })
        },
        setJobId(jobId){
          this.jobId=jobId
          this.dialogDelivery=true
        },
        delivery() {
          this.$http.post(window.lagou + '/jianli/index/delivery', { jobId:this.jobId }, { credentials: true, emulateJSON: true }).then((res) => {
            if (res.body === '1') {
              this.dialogDelivery = false
              this.$message({
                type: 'success',
                message: '投递成功，请静候佳音！',
                duration: 1000,
              })
            } else if (res.body === '2') {
              this.dialogDelivery = false
              this.$message({
                type: 'success',
                message: '请勿重复投递',
                duration: 1500
              })
            }
          }).catch((err) => { })
        },
        getCollect() {
          this.$http.post(window.lagou + '/job/index/getCollect', { currentPage: this.currentPage }, { credentials: true, emulateJSON: true }).then((res) => {
            this.jobs = res.body.data
            this.total = res.body.total
          }).catch((err) => { })
        },
        changePage(currentPage) {
          window.location.href = './collections.html?currentPage=' + currentPage
        },
        cancleCollect(id, index) {
          this.$http.post(window.lagou + '/job/index/cancleCollect', { id }, { credentials: true, emulateJSON: true }).then((res) => {
            if (res.body === 1) {
              this.$message({
                type: 'success',
                message: '取消收藏',
                duration: 1000,
                onClose: () => {
                  this.getCollect()
                }
              })
            }
          }).catch((err) => { })
        }
      },
      created() {
        this.currentPage = getParams().currentPage ? getParams().currentPage : 0
        this.checkCookie()
        this.getCollect()
      }
    })
  </script>
</body>

</html>